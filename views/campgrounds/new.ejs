<% layout('/layouts/boilerplate') %>
<form action="/campgrounds" method="post">
    <div>
        <label for="title">캠핑장 이름</label>
        <input type="text" id="title" placeholder="이름">
    </div>
    <div>
        <label for="location">위치</label>
        <input type="text" id="location" placeholder="위치">
    </div>
    <button id="submitButton">캠핑장 추가</button>
</form>
<a href="/campgrounds">모든 캠핑장</a>

<script>
    const submitButton = document.querySelector('#submitButton');        
    submitButton.addEventListener('click', e => {
        e.preventDefault();

        const title = document.querySelector('#title');
        const location = document.querySelector('#location');

        axios.post(`/campgrounds`, {
            title: title.value,
            location: location.value
        })
            .then(res => {
                if (res.data.success) {
                    window.location.href = '/campgrounds/' + res.data.id;
                } else {
                    alert(res.data.msg);
                }
            })
            .catch(err => {
                alert(err.response.data.msg);
            });
    });
</script>