<% layout('/layouts/boilerplate') %>
<form action="/campgrounds/<%= campground._id %>" method="post">
    <div>
        <label for="title">캠핑장 이름</label>
        <input type="text" id="title" placeholder="이름" value="<%= campground.title %>">
    </div>
    <div>
        <label for="location">위치</label>
        <input type="text" id="location" placeholder="위치" value="<%= campground.location %>">
    </div>
    <button id="submitButton">캠핑장 수정</button>
</form>
<a href="/campgrounds/<%= campground._id %>">뒤로가기</a>

<script>
    const submitButton = document.querySelector('#submitButton');        
    submitButton.addEventListener('click', e => {
        e.preventDefault();

        const title = document.querySelector('#title');
        const location = document.querySelector('#location');

        axios.put(`/campgrounds/<%= campground._id %>`, {
            title: title.value,
            location: location.value
        })
            .then(res => {
                if (res.data.success) {
                    window.location.href = '/campgrounds/<%= campground._id %>';
                } else {
                    alert(res.data.msg);
                }
            })
            .catch(err => {
                alert(err.response.data.msg);
            });
    });
</script>